

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Mixers and Merge-functions &mdash; MetaWards Documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/custom.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Usage" href="../../usage.html" />
    <link rel="prev" title="Multi-demographic sub-networks" href="01_demographics.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo.jpg" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
  <div id="version_box"></div>
</div>


          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation instructions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../model_data.html">Model data</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index_part01.html">Part 1 - Modelling outbreaks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part02.html">Part 2 - Refining the model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part03.html">Part 3 - Customising the outbreak</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part04.html">Part 4 - Customising the output</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index_part05.html">Part 5 - Modelling multiple demographics</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="01_demographics.html">Multi-demographic sub-networks</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Mixers and Merge-functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#force-of-infection-foi">Force of infection (FOI)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mix-evenly">Mix evenly</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cluster_usage.html">Running on a cluster</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../development.html">Developer’s guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MetaWards</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../tutorial.html">Tutorial</a> &raquo;</li>
        
          <li><a href="../index_part05.html">Part 5 - Modelling multiple demographics</a> &raquo;</li>
        
      <li>Mixers and Merge-functions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="../../usage.html" class="btn btn-neutral float-right" title="Usage" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="01_demographics.html" class="btn btn-neutral float-left" title="Multi-demographic sub-networks" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mixers-and-merge-functions">
<h1>Mixers and Merge-functions<a class="headerlink" href="#mixers-and-merge-functions" title="Permalink to this headline">¶</a></h1>
<p>In the last page you modelled outbreaks that were seeded either in
the “red” population, who were all “players”, and the “blue” population,
which contained all of the “workers”.</p>
<p>This resulted in two different outbreaks, which was understandable given
that only “workers” move between wards. One issue was that the demographics
were completely separate - infected individuals in the “red” population
couldn’t infect individuals in the “blue” population and vice-versa.</p>
<p>This is because the <a class="reference internal" href="../../api/generated/metawards.Network.html#metawards.Network" title="metawards.Network"><code class="xref py py-class docutils literal notranslate"><span class="pre">Network</span></code></a> for each demographic was
advanced independently, and no mixing took place.</p>
<div class="section" id="force-of-infection-foi">
<h2>Force of infection (FOI)<a class="headerlink" href="#force-of-infection-foi" title="Permalink to this headline">¶</a></h2>
<p>Infected individuals in a ward contribute to the <em>force of infection</em> (FOI)
of that ward. The higher the FOI, the more likely it is that other
individuals in a ward will become infected.</p>
<p>The FOIs for each demographic sub-network is calculated independently,
based only on the infected individuals from that demographic. We can thus
use the FOI calculation as a way of enabling different demographics to
mix. We do this in <code class="docutils literal notranslate"><span class="pre">metawards</span></code> using custom functions, called
<code class="xref py py-obj docutils literal notranslate"><span class="pre">mixers</span></code>, that choose different “merge functions” that are
used to mix and merge calculations of FOIs across different demographics
together.</p>
<p>The default mixer is <code class="xref py py-func docutils literal notranslate"><span class="pre">mix_none()</span></code>, which, as the
name suggests, performs no mixing between demographics.</p>
</div>
<div class="section" id="mix-evenly">
<h2>Mix evenly<a class="headerlink" href="#mix-evenly" title="Permalink to this headline">¶</a></h2>
<p>An alternative is to use <code class="xref py py-func docutils literal notranslate"><span class="pre">mix_evenly()</span></code>. This evenly
mixes all demographics. It sets the FOI in each ward in each demographic
equal to the sum of the FOIs in that ward across all demographics.</p>
<p>You can choose this mixer using the <code class="docutils literal notranslate"><span class="pre">--mixer</span></code> argument. Run <code class="docutils literal notranslate"><span class="pre">metawards</span></code>
using;</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>metawards -d lurgy2 -D demographics.json -a ExtraSeedsLondon.dat --mixer mix_evenly
</pre></div>
</div>
<p>You should now see that the outbreak spreads from the initial infection in
the “red” demographic to the “blue workers”, who then spread it around
the country to both the “red” and “blue” groups. For example,</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../usage.html" class="btn btn-neutral float-right" title="Usage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="01_demographics.html" class="btn btn-neutral float-left" title="Multi-demographic sub-networks" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">
        Last updated on May 06, 2020.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>